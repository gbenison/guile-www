2004-07-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am [MAINTAINER_MODE] (cvs-state-summary): New target.

2004-07-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* acinclude.m4 (AC_GUILE_WWW_PROG_PUNIFY): New AC_DEFUN.

	* configure.in: Call AC_GUILE_WWW_PROG_PUNIFY.

	* module-install.in (infodir): Delete unused var.
	(GUILE_TOOLS): Delete var.
	(filter): Make into a (possibly degenerate) sed program.
	(PUNIFY): New var. Use instead of "$GUILE_TOOLS punify".

	* Makefile.am (dw): New var.
	(install-data-local): Use $(dw).
	Also, delete *.scm files under $(dw)
	before doing `$(SHELL) module-install'.

2004-07-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* http.scm (parse-status-line): Fix bug: Use "" if TEXT is missing.
	Reported by Robert Marlow.

2004-07-14  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* http.scm: Refill; nfc.
	* main.scm: Likewise.
	* url.scm: Likewise.
	* url-coding.scm: Likewise.

2004-04-14  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-www.twerp: Specify "@paragraphindent 0".

2004-04-14  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* cgi.scm (cgi:make-cookie): Also
	accept keywords for `name' and `value'.
	Add example to docstring.  Add sig hint.

2004-03-17  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* module-install.in: New file.

	* configure.in (AC_OUTPUT): Add module-install.

	* Makefile.am (gwwwdir): Delete var.
	(gwww_DATA): Delete directive.
	(kludgefiles): Delete var.
	(wwwdir, basic): New vars.
	(install-data-local): New target.
	(install-data-hook): No longer do optargs kludge.
	No longer do module installation.
	Add METAINFO installation.
	(EXTRA_DIST): Add $(basic) and module-install.in.

2004-03-11  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (VERSION): Bump to "2.5" for release.

2004-03-11  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-www.twerp (Top): Add "big-dishing-loop" menu item.
	(big-dishing-loop): New node/chapter.

	* Makefile.am (kludgefiles): New var.
	(install-data-hook): Use $(kludgefiles).
	(DOT_DOC_FILES): Add server-utils/big-dishing-loop.doc.

	* examples/you-are-here: New file.

2004-03-11  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-www.twerp (parse-request):
	Add @twerpdoc for `skip-headers'.

2004-03-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (VERSION): Bump to "2.4" for release.

2004-03-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (DOT_DOC_FILES): Add server-utils/log.doc.

	* doc/guile-www.twerp (Top): Add menu item for `log'.
	(answer): Update example to show content-length in STATUS.
	(log): New node/chapter.

2004-02-29  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (VERSION): Bump to "2.3" for release.

2004-02-29  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-www.twerp (Top): Add menu items for new nodes.
	Expand blurb on module naming convention.  Add categories.
	(parse-request): New node/chapter.
	(filesystem): Likewise.
	(answer): Likewise.
	(http-status): Likewise.
	(content-type): Likewise.

2004-02-29  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (install-data-hook): Also handle
	subdirs `server-utils' and `data'.
	(DOT_DOC_FILES): Add server-utils/parse-request.doc,
	server-utils/filesystem.doc and server-utils/answer.doc.
	(asisdirs): New var.
	(EXTRA_DIST): Remove contrib and examples. Add $(asisdirs).
	(dist-hook): Iterate over $(asisdirs) instead of just
	examples and contrib, removing CVS subdirs and *.doc files.

2004-02-29  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* server-utils, data: New directories.

2004-01-24  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (VERSION): Bump to "2.2" for release.

2004-01-24  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* http.scm (http:post-form): Interpret #f for file-upload
	spec element "mime-type" to mean "text/plain".
	Also, document "bad upload spec" error.

2004-01-24  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (install-data-hook): Also punify installed files.

2004-01-24  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* cgi.scm: Also use module (srfi srfi-13).
	(subs): New alias for `make-shared-substring'.
	(*env-alist*): Use `subs' instead of `substring'.
	(cgi:init, parse-form, separate-fields-discarding-char): Use `subs'.
	(parse-form-multipart): Rewrite to be able to recurse exactly once
	for "multipart/mixed" content type, and also w/ fewer substring ops.
	Also, save parsed metadata and raw MIME headers as an object property
	of the string (file contents).
	(cgi:uploads): Expand docstring; nfc.

	* acinclude.m4 (AC_GUILE_WWW_MODULES_AOK): Also require (srfi srfi-13).

2004-01-23  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* http.scm (http:post-form): For internal proc `validate-upload-spec',
	add check for name, and expand check for source in the case where it
	is a procedure, to make sure it is indeed a thunk.
	For internal proc `c-type', output quotes around the boundary value.

2004-01-23  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* http.scm (http:post-form): For arg `fields', also accept as
	"fvalue" a file-upload specification in the form of (SOURCE NAME
	MIME-TYPE TRANSFER-ENCODING).  In the presence of such a spec, use
	content type "multipart/form-data" and format the headers and body
	accordingly.  Per field, use content type "multipart/mixed" and
	format components accordingly.

2004-01-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* http.scm (http:request): Document special handling for
	content-type "application/x-www-form-urlencoded".

2004-01-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* http.scm (form-hack-regex): New var.
	(http:request): Check for "application/x-www-form-urlencoded"
	content type and one-line body, in which case arrange to omit
	CRLF and adjust content-length accordingly.

2004-01-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* acinclude.m4 (AC_GUILE_WWW_MODULE_CHECK): Delete.
	(AC_GUILE_WWW_CHECK_ICE9_OPTARGS): Delete.
	(AC_GUILE_WWW_MODULES_AOK): Use GUILE_CHECK_ICE9_OPTARGS
	instead of AC_GUILE_WWW_CHECK_ICE9_OPTARGS.

2004-01-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* autogen.sh: Update tool versions; nfc.

2004-01-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* cgi.scm (cgi:value): Use `and=>'.
	(cgi:cookie): Likewise.
	(cgi:upload): Likewise.
	(cgi:uploads): Likewise.
	Also, fix omission bug: Delete cell as documented.

2004-01-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* cgi.scm (cgi:init): Fix doc omission bug: Describe
	return value for key `http-accept-types'; nfc.

2004-01-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (VERSION): Bump to 2.1 for release.

2004-01-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* cgi.scm: No longer use module (www url).
	Instead, use module (www url-coding).
	(parse-form): Use `url-coding:decode'.

2004-01-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* url-coding.scm: New file.

	* url.scm: Use module (www url-coding).
	(url:decode): Rewrite to delegate to `url-coding:decode'.
	(url:encode): Rewrite to delegate to `url-coding:encode'.

	* Makefile.am (gwww_DATA): Add url-coding.scm.
	(DOT_DOC_FILES): Add url-coding.doc.

	* doc/guile-www.twerp: Update direntry to use "Guile-WWW".
	(Top): Add "url-coding" to menu.
	(url-coding): New node/chapter.

2004-01-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* acinclude.m4 (AC_GUILE_WWW_TWERP_PREP): New AC_DEFUN.
	* configure.in (AC_GUILE_WWW_TWERP_PREP): New macro call.
	* doc/Makefile.am (.twerp.texi): Enable dependency tracking/update.

2004-01-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* cgi.scm (*env-alist*): New var.
	(env-look, env-set!): New procs.
	(cgi-server-software-type cgi-server-software-type,
	cgi-server-software-version, cgi-server-hostname,
	cgi-gateway-interface, cgi-server-protocol-name,
	cgi-server-protocol-version, cgi-server-port, cgi-request-method,
	cgi-path-info, cgi-path-translated, cgi-script-name,
	cgi-query-string, cgi-remote-host, cgi-remote-addr,
	cgi-authentication-type, cgi-remote-user, cgi-remote-ident,
	cgi-content-type, cgi-content-length, cgi-http-accept-types,
	cgi-http-user-agent, cgi-http-cookie): Delete vars.  Update
	references to either call `env-look' or `env-set!' as appropriate.
	(init-environment): Delete; move functionality into `*env-alist*'.
	(cgi:getenv): Use `env-look'.  Fix doc omission bug: Mention type
	and possible values for `content-length' and `server-port'.  Also,
	document "unrecognized key" error condition.
	(read-raw-form-data): Take explicit arg `len'. Update callers.
	(get-cookies): Take explicit arg `raw'. Update callers.

2004-01-13  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-www.twerp (cgi):
	Fix omission bug: Add @twerpdoc for `cgi:getenv'.

2004-01-13  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (VERSION): Bump to 2.0 for release.

2004-01-13  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* acinclude.m4: New file.

	* configure.in (AC_GUILE_WWW_MODULES_AOK): New macro call.

	* Makefile.am (install-data-hook): Add conditional optargs kludge.

2004-01-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-www.twerp (Top):
	Omit edition in intro; version is enough.
	Remove @twerpsetsearchpath directive.
	(http, url, cgi, main): Rewrite chapters using
	@twerpdoc directives and w/o @twerpcommentary directives.

2004-01-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* cgi.scm: No longer use module (ice-9 optargs).
	Instead, use module (ice-9 optargs-kw).
	Adapt and/or write docs for all exported procs.
	(cgi-server-software-type, cgi-server-software-version,
	cgi-server-hostname, cgi-gateway-interface, cgi-server-protocol-name,
	cgi-server-protocol-version, cgi-server-port, cgi-request-method,
	cgi-path-info, cgi-path-translated, cgi-script-name,
	cgi-query-string, cgi-remote-host, cgi-remote-addr,
	cgi-authentication-type, cgi-remote-user, cgi-remote-ident,
	cgi-content-type, cgi-content-length, cgi-http-accept-types,
	cgi-http-user-agent, cgi-http-cookie): No longer export these vars.
	(cgi:getenv): New proc, exported.
	(cgi:make-cookie): Rewrite.

	* http.scm: Adapt and/or write docs for all exported procs.
	(http:version): No longer export var.
	(http:user-agent): Delete var.

	* main.scm, url.scm: Adapt and/or write docs for all exported procs.

2004-01-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* autogen.sh: Also pass guile-specific "-I" args to aclocal.

	* configure.in (GUILE_SITE_DIR): New macro call.

	* Makefile.am (gwwwdir): Use $(GUILE_SITE) instead of $(datadir)/guile.
	(install-data-hook): New target.

	* INSTALL: Update *.scm install directory.
	Mention $(GUILE_SITE)/.module-catalog update.

2004-01-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (EXTRA_DIST): Add doc-snarf.

2004-01-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* autogen.sh: Add usage comment, w/ info on auto* tools versions.
	Before calling automake, set up dummy doc/guile-www.texi file.
	No longer pass "--verbose" to automake.

2004-01-11  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-www.twerp: Update copyright.
	Remove RCS tag.
	(Top): Change @top to "The (www *) Modules".
	Remove Concept Index.
	Add @twerpsetsearchpath directive.
	(http): Spiff blurb.  Replace manual
	commentary slice w/ @twerpcommentary directive.
	(url, cgi, main): Likewise.
	(Concept Index): Delete node.

	* doc/Makefile.am: Update copyright.
	(BUILT_SOURCES): New automake directive.
	(doc-index-prep): New target.
	(guile-www.texi): New dependency.
	(twerp2texi): New var.
	(.twerp.texi): New pattern rule.
	(EXTRA_DIST): New automake directive.

	* Makefile.am: Update copyright.
	[MAINTAINER_MODE]
	(SUFFIXES): New automake directive.
	(.scm.doc): New pattern rule.
	(DOT_DOC_FILES): New var.
	(.doc-index): New target.
	(CLEANFILES): New automake directive.

	* configure.in: Update copyright.
	(AM_MAINTAINER_MODE): New macro call.

2004-01-11  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-www.twerp: Rename from doc/guile-www.texi.

2004-01-11  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc-snarf: New file.

2004-01-11  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* cgi.scm: Update copyright.
	Use "#:" in `define-module' form.
	* http.scm: Likewise.
	* https.scm: Likewise.
	* main.scm: Likewise.
	* url.scm: Likewise.

2003-10-19  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* http.scm (http:request): Always include `Host' in header.
	Thanks to a bug report by Jose Roberto B. de A. Monteiro.

2003-10-09  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* http.scm (http:message-status-ok?): Use `http:message-status-code'
	instead of non-existent `http:status-code'.  Thanks to Kevin Ryde.

2003-02-15  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in (VERSION): Bump to 1.1.1ttn5 for release.

2003-02-15  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* http.scm (http:request): Fix bug: Change first arg to
	`http:fetch-header' call to a symbol.  Thanks to Paul Emsley.

2003-02-12  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in (VERSION): Bump to 1.1.1ttn4 for release.

2003-02-12  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* Makefile.am (dist-hook): Also clear out CVS dirs from examples/ subdir.

2003-02-12  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* url.scm (safe-chars): Use `string->list' for conciseness; nfc.

2003-02-12  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* examples/wwwcat: Fix buglet: No longer assume
	`program-arguments' non-#f is significant; make check
	more fine-grained.  Thanks to Paul Emsley.

2003-02-12  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* http.scm (http:user-agent): Use "NAME/VERSION" format.
	(http:get): Fix omission bug: Include `Host' header in `http:request' call.
	Thanks to Paul Emsley for the bug report.

2003-02-12  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* http.scm (http:post-form): New public proc.
	* doc/guile-www.texi: Mention http:post-form.

2003-02-12  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* cgi.scm (init-environment): Handle ", " as well as ","
	as HTTP_ACCEPT element separator.  Also, handle
	SERVER_SOFTWARE that omits "/version" information.

2002-04-26  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in: Update copyright.
	Bump version to 1.1.1 for release.

	* README: Update version.
	Mention examples/ subdir.

2002-04-26  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* cgi.scm: Update copyright.
	Also use modules (ice-9 regex) and (ice-9 optargs).

	(file-uploads, cookies): New vars.
	(cgi:init): Handle "application/x-www-form-urlencoded".
	Handle "multipart/form-data".
	Handle cookies init.
	(cgi:uploads, cgi:upload, cgi:cookies, cgi:cookie,
	cgi:make-cookie): New procs, exported.
	(parse-form-multipart): New proc.
	(init-environment): Also set var `cgi-http-cookie'.
	(get-cookies): New proc.

	Thanks to Aaron VanDevender.

	* http.scm: Update copyright.
	(http:request): Use `format' instead of `string-append'.

	* main.scm: Comment munging; nfc.

	* url.scm: Update copyright.
	(url:unparse): Use `format' instead of `string-append'.

2002-04-11  Thien-Thi Nguyen  <ttn@glug.org>

	* examples/wwwcat, examples/cookie.cgi, examples/README:
	New files (wwwcat moved from ..).

2001-11-21  Thien-Thi Nguyen  <ttn@glug.org>

	* wwwcat: Fix typo.  Thanks to Ralf Mattes.

2001-11-18  Thien-Thi Nguyen  <ttn@glug.org>

	* configure.in: Bump to version 1.0.1 for release.

	* README, NEWS: Update.

	* doc/guile-www.texi (direntry): Fix syntax error.
	Thanks to Eric Gillespie, Jr.

2001-11-17  Thien-Thi Nguyen  <ttn@glug.org>

	* configure.in: Bump version to 1.0 for release.

	* wwwcat, cgi.scm, http.scm, main.scm, url.scm:
	Update copyright.

	* configure.in: Add copyright.

	(AC_OUTPUT): Add doc/Makefile.

	* AUTHORS, NEWS:
	Initial revision.

	* Makefile.am: Add copyright.

	(AUTOMAKE_OPTIONS): Set to "gnu".
	(SUBDIRS, EXTRA_DIST): New vars.
	(dist-hook): New target.

	* README: Rewrite.

	* autogen.sh: Pass "--verbose" to automake.

	* doc/guile-www.texi, doc/Makefile.am:
	New file.

2001-11-16  Thien-Thi Nguyen  <ttn@glug.org>

	* cgi.scm, http.scm, main.scm, url.scm:
	Add commentary; nfc.

	* COPYING: New file.

	* .cvsignore (Makefile.in, aclocal.m4, configure):
	Add.

	* configure: bye bye

2001-11-15  Thien-Thi Nguyen  <ttn@glug.org>

	* contrib/ssl-support.diff: New file.
	Thanks to Eric Hanchrow.

2001-02-04  Marius Vollmer  <mvo@zagadka.ping.de>

	* http.scm: Use (ice-9 rdelim) if `read-line' not defined.
	Thanks to Thien-Thi Nguyen.

2000-06-04  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* main.scm (www:get): Pass url as single arg.
	(Thanks to Dale	P. Smith.)

1998-07-27  Jim Blandy  <jimb@red-bean.com>

        * Test of EGCS repository access.

1997-12-24  Tim Pierce  <twp@skepsis.com>

	* cgi.scm (init-environment): Make server-software and
	server-protocol optional.

1997-12-22  Tim Pierce  <twp@skepsis.com>

	* cgi.scm (read-raw-form-data): Add `cgi-' to content-length.
	(parse-form): Change `url-decode' to `url:decode'.

Mon Oct 20 18:06:10 1997  Jim Blandy  <jimb@totoro.red-bean.com>

	* configure.in: Update version to 1.0b.
	configure: Regenerated.

	* Makefile.in, aclocal.m4, configure: Regenerated w/automake 1.2c.

	* url.scm (url:scheme, url:host, url:port, url:path): Move
	accessors up.
	(url:address): New accessor for "mailto:" URLs.
	(url:unknown): New accessor for unrecognized URL types.
	(url:user): New accessor for "ftp" URLs.
	(url:make, url:make-http, url:make-ftp, url:make-mailto): New
	constructors for URL objects.
	(url-regexp): Replaced by...
	(http-regexp, ftp-regexp, mailto-regexp): Separate regular
	expressions for different URL schemes.
	(url:parse): Use the above to handle ftp and mailto URLs, and also
	do something graceful with unrecognized garbage.
	(url:unparse): New function, for turning a parsed url into a
	string.

	* http.scm (add-open-connection!, get-open-connection): Incomplete
 	code replaced with dummy definitions, so we can give it to Mikael
	immediately.
	(http:request): Close the socket after we're done reading the
	body.

	* http.scm (http:request): Reformatted for readability.

	* http.scm (http:request): Don't expect a body in reply to a
	"HEAD" request, even though we do get a "content-length" header.

Tue Jun 17 17:27:04 1997  Tim Pierce  <twpierce@bio-5.bsd.uchicago.edu>

	* http.scm: (http:request): Force "/" onto the beginning of the
	"path" variable unconditionally.  We must do this because of a
	stupid incompatibility between the URL RFC and HTTP RFC.

	* http.scm: (parse-status-line): New function.
	(http:request): Use parse-status-line instead of
	separate-fields-discarding-char (which does not work when a status
	line contains more than two spaces).
	(separate-fields-discarding-char): Removed.

Tue Jun 17 01:45:59 1997  Tim Pierce  <twp@twp.tezcat.com>

	* http.scm (http:request): Change calling conventions to accept a
 	method and a URL rather than a port and request string.  Do some
	sanity checking on arguments.
  	(http:get): Pass a single URL argument to http:request.
	(http:open): Permit port argument to be #f in addition to '().
	(display-with-crlf): Make port argument optional.
	(add-open-connection!): Braino fix (set! for setq).

	* Makefile: New file. (Oops.)

Mon Jun 16 17:49:20 1997  Tim Pierce  <twpierce@bio-5.bsd.uchicago.edu>

	Release preparations.
	* Makefile.am, configure.in, install-sh, mkinstalldirs, missing:
	New files.
	* Makefile.in, configure, aclocal.m4: Generated, not re.
	* README: New file.

Sun Jun 15 00:50:22 1997  Tim Pierce  <twp@twp.tezcat.com>

	* http.scm: add some support for persistent connections.
	(http:connect): check get-open-connection before creating a new
	socket, and call add-open-connection! after creating one.
	(add-open-connection!): New function.
	(get-open-connection): New function.

Mon Jun  9 23:42:32 1997  Tim Pierce  <twp@twp.tezcat.com>

	New WWW module.
	* cgi.scm: New file.
	* http.scm: New file.
	* main.scm: New file.
	* url.scm: New file.
	* wwwcat: New file.

