2009-06-29  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Use SRFI-13 `substring/shared', not `make-shared-substring'.

	* http.scm: Use module (srfi srfi-13).
	(subs): Delete proc alias.
	* server-utils/cookies.scm: Likewise.
	* server-utils/filesystem.scm: From module (srfi srfi-13),
	select also `substring/shared', renaming to `subs'.
	(subs): Delete proc alias.

2009-06-29  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Make `cleanup-filename' handle edge cases more consistently.

	* server-utils/filesystem.scm: Don't use module (ice-9 regex);
	from module (srifi srfi-13), also select `string=', `string-suffix?',
	`string-tokenize', `string-join'; use module (srfi srfi-14).
	(clean-parent-rx): Delete regexp.
	(clean-dot-rx, clean-double-slash-rx): Likewise.
	(+not-slash+): New data structure (charset).
	(cleanup-filename): Rewrite.

2009-06-26  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Fix bug: Make `access-forbidden?-proc' allow "filename is docroot".

	* server-utils/filesystem.scm: Use module (srfi srfi-13).
	(access-forbidden?-proc): Fix OBOE: Don't fail
	if the filename is exactly the same as the docroot.

2009-06-02  Thien-Thi Nguyen  <ttn@gnuvola.org>

	[int] Consolidate some ChangeLog files.

	* ChangeLog-data: Rename from data/ChangeLog.
	* ChangeLog-server-utils: Rename from server-utils/ChangeLog.
	* Makefile.am (EXTRA_DIST): Also distribute the ChangeLog-foo files.

2009-05-28  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Release: 2.25

2009-05-28  Thien-Thi Nguyen  <ttn@gnuvola.org>

	[int] Use (srfi srf-13) more.

	* cgi.scm (subs): Delete proc alias.
	(env-extraction-methods): Use `substring/shared' directly.
	(make-ccc): Likewise.  Also, use `string-ci='.

2009-05-26  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Make `cgi:init' handle optional arg for specifying `uploads-lazy'.

	* cgi.scm: Don't use module (ice-9 regex);
	autoload module (www server-utils form-2-form).
	(fs, updated-alist, parse-form-multipart): Delete procs.
	(make-ccc init!): Keep track of "pre-squeezed" upload file contents
	option; if pre-squeezed, construct backward compatible string w/
	object properties for the uploads collation.
	(make-ccc): For #:init pass args to `init!'.
	(cgi:init): Accept rest-arg `opt'; pass it to `ONE #:init!'.
	(cgi:uploads): Update pre-form doc comment; nfc.

2009-05-26  Thien-Thi Nguyen  <ttn@gnuvola.org>

	[int] Make (www cgi) use (www server-utils parse-request).

	* cgi.scm: Autoload module (www server-utils parse-request);
	don't use modules (www url-coding), (ice-9 rw).
	(collate, ws/comma-split): New procs.
	(read-n-bytes, split): Delete procs.
	(env-extraction-methods): Use `ws/comma-split'.
	(parse-form): Delete proc.
	(make-ccc init!): Use `read-body', `alist<-query', `collate'.

2009-05-26  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Fix bug: For (www cgi), don't mix query string and form data.

	This regression was introduced in Guile-WWW 2.1.

	* cgi.scm (make-ccc init!): Ignore query-string.

2009-05-24  Thien-Thi Nguyen  <ttn@gnuvola.org>

	New (www server-utils cookies) proc: simple-parse-cookies

	* cgi.scm: Autoload (www server-utils cookies).
	(get-cookies): Delete proc.
	(make-ccc init!): Use `simple-parse-cookies'.

2009-05-24  Thien-Thi Nguyen  <ttn@gnuvola.org>

	New (www cgi) proc: cgi:cookie-names

	* cgi.scm (cgi:cookie-names): New proc, exported.

2009-05-23  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Use `(ice-9 and-let-star) and-let*'.

	* cgi.scm: Use module (ice-9 and-let-star).
	(updated-alist): Use `and-let*'.
	(env-extraction-methods server-sw-info): Likewise.
	(env-extraction-methods server-pr-info): Likewise.
	(parse-form-multipart get-pair): Likewise.
	(make-ccc init!): Likewise.
	(make-ccc uploads): Likewise.

2009-05-11  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Use `string-null?'.

	* http.scm (http:request): Use `string-null?'.

2009-05-11  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Use `zero?'.

	* cgi.scm (make-ccc init!): Use `zero?'.
	* http.scm (http:request): Likewise.

2008-05-27  Thien-Thi Nguyen  <ttn@gnuvola.org>

	New (www http) proc: http:connect.

	* http.scm (connection-table): Delete data structure.
	(add-open-connection!, get-open-connection): Delete procs.
	(http:connect): New proc, exported.
	(http:open): Use `http:connect'.

2008-04-24  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Clean up `socket' calls.

	* http.scm (http:open): Use `protoent:proto',
	`hostent:addr-list' and `PF_INET'.

2008-04-23  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Fix bug introduced in 2.22, change:
	Move scheme files under source/:
	For doc extraction, don't search for module commentary.

	* utcsec.scm: Move commentary to ../doc/guile-info.twerp.

2008-04-18  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Move scheme files under source/.

	Here, $(prev)/foo stands for ../foo.
	* Makefile.am: New file.
	* cgi.scm: Rename from $(prev)/cgi.scm.
	* http.scm: Rename from $(prev)/http.scm.
	* https.scm: Rename from $(prev)/https.scm.
	* main.scm: Rename from $(prev)/main.scm.
	* url-coding.scm: Rename from $(prev)/url-coding.scm.
	* url.scm: Rename from $(prev)/url.scm.
	* utcsec.scm: Rename from $(prev)/utcsec.scm.
